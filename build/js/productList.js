var o=(c,e,t)=>new Promise((n,s)=>{var l=r=>{try{i(t.next(r))}catch(a){s(a)}},u=r=>{try{i(t.throw(r))}catch(a){s(a)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(l,u);i((t=t.apply(c,e)).next())});import{renderListWithTemplate as d,calculateDiscount as y}from"./utils.js";export default class m{constructor(e,t,n){this.category=e,this.dataSource=t,this.listElement=n}init(){return o(this,null,function*(){const e=yield this.dataSource.getData(this.category);this.renderList(e),console.log(e),document.querySelector(".title").innerHTML=this.category})}prepareTemplate(e,t){e.querySelector("a").href+=t.Id,t.IsClearance&&(e.querySelector(".clearance").textContent="Clearance"),e.querySelector("img").src=t.Images.PrimaryMedium,e.querySelector("img").alt+=t.Name,e.querySelector(".card__brand").textContent=t.Brand.Name,e.querySelector(".card__name").textContent=t.NameWithoutBrand,e.querySelector(".product-card__price").textContent+=t.FinalPrice;const n=y(t);return n>0&&(e.querySelector(".discount").textContent+=`-${n}%`),e}renderList(e){this.listElement.innerHTML="";const t=document.getElementById("product-card-template");d(t,this.listElement,e,this.prepareTemplate)}}
